(this["webpackJsonpluminour-react-challenge"]=this["webpackJsonpluminour-react-challenge"]||[]).push([[1],{103:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),o=n.n(c),u=n(79),s=n(18),i=n(26),d=n(139),l=n(140),f=n(135),b=n(62),m=n(61),h=n(72),p=n.n(h),O=n(17),j=n(12),v=n(9),g=n(8),k={users:[],loading:!1,hasLoaded:!1,errorMessage:""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case g.a.setUsers:return Object(v.a)({},e,{users:r.users});case g.a.addUsers:return Object(v.a)({},e,{users:[].concat(Object(j.a)(r.users),Object(j.a)(e.users))});case g.a.fetchStart:return Object(v.a)({},e,{loading:!0});case g.a.fetchEnd:return Object(v.a)({},e,{errorMessage:r&&r.errorMessage||"",loading:!1,hasLoaded:!0});default:return e}},E=n(16),w=n(25),I={orders:[],loading:!1,hasLoaded:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case E.a.setOrders:return Object(v.a)({},e,{orders:r.orders});case E.a.updateOrders:return Object(v.a)({},e,{orders:Object(w.h)(r.orders,e.orders)});case E.a.fetchStart:return Object(v.a)({},e,{loading:!0});case E.a.fetchEnd:return Object(v.a)({},e,{loading:!1,hasLoaded:!0});default:return e}},S=n(36),M={books:[],loading:!1,hasLoaded:!1,errorMessage:""},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case S.a.setBooks:return console.log(r),Object(v.a)({},e,{books:r.books});case S.a.addBooks:return Object(v.a)({},e,{books:[].concat(Object(j.a)(r.books),Object(j.a)(e.books))});case S.a.updateBooks:return Object(v.a)({},e,{books:Object(w.h)(r.books,e.books)});case S.a.deleteBooks:return Object(v.a)({},e,{books:e.books.filter((function(e){var t=e.id;return!r.books.find((function(e){return e.id===t}))}))});case S.a.fetchStart:return Object(v.a)({},e,{loading:!0});case S.a.fetchEnd:return Object(v.a)({},e,{loading:!1,hasLoaded:!0});default:return e}},B=n(35),U={items:[],loading:!1,hasLoaded:!1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case B.a.setItems:return Object(v.a)({},e,{items:r.items});case B.a.addItems:return Object(v.a)({},e,{items:[].concat(Object(j.a)(r.items),Object(j.a)(e.items))});case B.a.updateItems:return Object(v.a)({},e,{items:Object(w.h)(r.items,e.items)});case B.a.removeItems:return Object(v.a)({},e,{items:Object(w.e)(r.items,e.items)});case B.a.fetchStart:return Object(v.a)({},e,{loading:!0});case B.a.fetchEnd:return Object(v.a)({},e,{loading:!1,hasLoaded:!0});default:return e}},q=n(41),C={me:null,loading:!1,hasLoaded:!1},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case q.a.set:return Object(v.a)({},e,{me:r.me});case q.a.clear:return C;default:return e}},P=Object(O.combineReducers)({users:y,orders:x,books:L,cartItems:z,me:N}),D={key:"root",storage:p.a,whitelist:["me"]},J=Object(m.a)(D,P),W=Object(b.a)({reducer:J,middleware:Object(b.b)({serializableCheck:!1})}),T=W,_=Object(m.b)(W),A=n(130),K=n(142),R=n(134),Y=n(49),$=n(45),F=function(){var e=Object(s.g)().pathname,t=Object(s.f)().push,n=Object(Y.b)().me;return n?a.a.createElement(A.a,null,a.a.createElement(K.a,{variant:"scrollable",value:"/".concat(e.split("/")[1])||!1,onChange:function(e,n){return t(n)}},Object.keys($.a).filter((function(e){return $.a[e].roles.includes(n.role)&&!$.a[e].noNav})).map((function(e){return a.a.createElement(R.a,{key:e,value:e,label:$.a[e].name})})))):null},G=n(44),H=n(56),Q=n(144),V=n(141),X=n(137),Z=n(138),ee=function(e){var t=e.children;Object(H.c)();var n=Object(H.b)(),c=n.authenticated,o=n.authenticate,u=n.errorMessage,s=n.loading,i=Object(r.useState)(""),d=Object(G.a)(i,2),l=d[0],b=d[1],m=Object(r.useState)(""),h=Object(G.a)(m,2),p=h[0],O=h[1];return c?a.a.createElement("div",null,t):a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o(l,p)}},a.a.createElement(Q.a,{open:!!s},a.a.createElement(f.a,null)),a.a.createElement(V.a,{type:"text",label:"Username",fullWidth:!0,value:l,onChange:function(e){return b(e.target.value)},disabled:!!s,required:!0}),a.a.createElement(V.a,{type:"password",label:"Password",fullWidth:!0,value:p,onChange:function(e){return O(e.target.value)},disabled:!!s,required:!0}),a.a.createElement(X.a,{type:"submit"},"Login"),u&&a.a.createElement(Z.a,{variant:"h5",color:"error"},u))},te=n(78),ne=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,178))})),re=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,172))})),ae=Object(r.lazy)((function(){return n.e(11).then(n.bind(null,173))})),ce=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,174))})),oe=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,175))})),ue=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,176))})),se=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,177))})),ie=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,179))})),de=function(){return a.a.createElement(i.a,{store:T},a.a.createElement(te.a,{loading:null,persistor:_},a.a.createElement(d.a,null,a.a.createElement(u.a,null,a.a.createElement(ee,null,a.a.createElement(F,null),a.a.createElement(l.a,null),a.a.createElement(r.Suspense,{fallback:a.a.createElement(f.a,null)},a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/",exact:!0,component:ne}),a.a.createElement(s.a,{path:"/book-list",exact:!0,component:ie}),a.a.createElement(s.a,{path:"/users",exact:!0,component:re}),a.a.createElement(s.a,{path:"/users/:userId/orders",exact:!0,component:ue}),a.a.createElement(s.a,{path:"/users/:userId/orders/:orderId",exact:!0,component:se}),a.a.createElement(s.a,{path:"/logout",exact:!0,component:ae}),a.a.createElement(s.a,{path:"/my-orders",exact:!0,component:ce}),a.a.createElement(s.a,{path:"/my-orders/:orderId",exact:!0,component:oe}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},16:function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.setOrders="orders/setOrders",e.updateOrders="oders/updateOrds",e.fetchStart="orders/fetchStart",e.fetchEnd="orders/fetchEnd"}(r||(r={})),function(e){e.new="new",e.paid="paid",e.sent="sent",e.canceled="canceled"}(a||(a={}))},25:function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"h",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"d",(function(){return O}));var r=n(7),a=n(9),c=n(12),o=n(8),u=n(16),s=function(e){return new Promise((function(t){return setTimeout(t,e)}))},i=function(e,t){return t.find((function(t){return t.id===e}))},d=function(e,t){return t.map((function(t){return e.find((function(e){return t.id===e.id}))||t}))},l=function(e,t){return t.filter((function(t){return!e.find((function(e){return t.id===e.id}))||t}))},f=function(e){return{id:e.id,title:e.volumeInfo&&e.volumeInfo.title,author:e.volumeInfo&&e.volumeInfo.authors&&e.volumeInfo.authors.join(", ")||"Unknown Author",published_date:e.volumeInfo&&e.volumeInfo.publishedDate||(new Date).toISOString().split("T"),book_cover:e.volumeInfo&&e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.thumbnail||"https://via.placeholder.com/150x150.png",quantity:Math.floor(Math.floor(100*Math.random())%100)}},b=function(e,t){return[Object(a.a)({},e,{quantity:1})].concat(Object(c.a)(t))},m=function(e,t){return t.filter((function(t){return t.id!==e.id}))},h=function(e,t){return t.map((function(t){return t.id===e.id?Object(a.a)({},e,{quantity:t.quantity+1}):t}))},p=function(e,t){return t.map((function(t){return t.id===e.id?Object(a.a)({},e,{quantity:t.quantity-1}):t}))},O=function(e,t){return e===o.b.admin?function(e){var t;return t={},Object(r.a)(t,u.b.canceled,[u.b.paid,u.b.paid].includes(e)),Object(r.a)(t,u.b.sent,[u.b.paid,u.b.paid].includes(e)),t}(t):function(e){var t;return t={},Object(r.a)(t,u.b.canceled,e===u.b.new),Object(r.a)(t,u.b.paid,e===u.b.new),t}(t)}},35:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.setItems="cart/setCart",e.addItems="cart/add",e.removeItems="cart/remove",e.updateItems="cart/update",e.fetchStart="cart/fetchStart",e.fetchEnd="cart/fetchEnd"}(r||(r={}))},36:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.setBooks="books/setBooks",e.updateBooks="books/updateBooks",e.addBooks="books/addBooks",e.deleteBooks="books/deleteBooks",e.fetchStart="books/fetchStart",e.fetchEnd="books/fetchEnd"}(r||(r={}))},41:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.set="me/set",e.clear="me/clear"}(r||(r={}))},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(8),a={"/":{name:"Books",roles:[r.b.admin,r.b.client],href:function(){return"/"}},"/book-list":{name:"Book List",roles:[r.b.admin],href:function(){return"/book-list"}},"/my-orders":{name:"My Orders",roles:[r.b.client],href:function(){return"/my-orders"}},"/my-orders/:orderId":{name:"My Orders",roles:[r.b.client],noNav:!0,href:function(e){return"/my-orders/".concat(e)}},"/users":{name:"User List",roles:[r.b.admin],href:function(){return"/users"}},"/users/:userId/orders":{name:"My Orders",roles:[r.b.admin,r.b.client],noNav:!0,href:function(e){return"/users/".concat(e,"/orders")}},"/users/:userId/orders/:orderId":{name:"My Orders",roles:[r.b.admin,r.b.client],noNav:!0,href:function(e,t){return"/users/".concat(e,"/orders/").concat(t)}},"/logout":{name:"Logout",roles:[r.b.admin,r.b.client],href:function(){return"/logout"}}}},49:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var r=n(26),a=n(0),c=n(51),o=n(18),u=function(){return Object(r.c)((function(e){return e.me}))},s=function(){var e=function(){var e=Object(r.b)();return{clearMe:Object(a.useCallback)((function(){return e(Object(c.a)())}),[e])}}().clearMe,t=Object(o.f)().push;Object(a.useEffect)((function(){t("/"),e()}),[e,t])}},51:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(41),a=function(e){return{type:r.a.set,payload:{me:e}}},c=function(){return{type:r.a.clear}}},56:function(e,t,n){"use strict";var r=n(0),a=n(26),c=n(19),o=n.n(c),u=n(30),s=n(8),i=n(12),d=n(25),l=function(){return JSON.parse(localStorage.getItem("users")||"null")},f=function(e){return localStorage.setItem("users",JSON.stringify(e))},b=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.i)(1e3);case 2:return e.abrupt("return",l());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.i)(1e3);case 2:return n=l()||[],r=[].concat(Object(i.a)(t),Object(i.a)(n)),f(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.i)(1e3);case 2:if(r=l()||[],!(a=r.find((function(e){return e.username===t&&e.password===n})))){e.next=6;break}return e.abrupt("return",a);case 6:throw new Error("Incorrect credentials");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=n(51),O=[{id:"1",name:"Yagami",surname:"Light",username:"Kira",password:"DeathNode",role:s.b.admin},{id:"2",name:"User",surname:"Some",username:"simple",password:"123",role:s.b.client}],j=function(e){return{type:s.a.setUsers,payload:{users:e}}},v=function(){return{type:s.a.fetchStart}},g=function(e){return{type:s.a.fetchEnd,payload:{errorMessage:e}}},k=n(18),y=n(49);n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return I}));var E=function(e){var t=Object(a.b)(),n=Object(a.c)((function(e){return e.users})),c=n.users,s=n.loading,i=n.hasLoaded,d=n.errorMessage;return Object(r.useEffect)((function(){i&&!e||s||t(function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v()),e.prev=1,e.next=4,b();case 4:if(null!==(n=e.sent)){e.next=10;break}return e.next=8,m(O);case 8:r=e.sent,t(j(r));case 10:n&&t(j(n)),t(g()),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),t(g());case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}())}),[i,s,e,t]),{users:c,loading:s,hasLoaded:i,errorMessage:d}},w=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.me})).me,n=Object(a.c)((function(e){return e.users})),c=n.errorMessage,s=n.loading;return{authenticated:Object(r.useMemo)((function(){return!!t}),[t]),authenticate:Object(r.useCallback)((function(t,n){e(function(e,t){return function(){var n=Object(u.a)(o.a.mark((function n(r){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(v()),n.prev=1,n.next=4,h(e,t);case 4:a=n.sent,r(Object(p.b)(a)),r(g()),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),r(g(n.t0.message));case 13:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}),[e]),errorMessage:c,loading:s}},I=function(){var e=Object(y.b)().me,t=Object(k.f)().push;Object(r.useEffect)((function(){e&&e.role!==s.b.admin&&t("/")}),[e,t])}},8:function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.setUsers="users/setUsers",e.updateUsers="users/updateUsers",e.removeUsers="users/removeUsers",e.addUsers="users/addUsers",e.fetchStart="users/fetchStart",e.fetchEnd="users/fetchEnd"}(r||(r={})),function(e){e.admin="admin",e.client="client"}(a||(a={}))},85:function(e,t,n){e.exports=n(103)}},[[85,2,3]]]);
//# sourceMappingURL=main.a62dbba9.chunk.js.map