{"version":3,"sources":["reducers/cart/requests.ts","reducers/cart/actions.ts","reducers/books/requests.ts","reducers/books/actions.ts","reducers/books/hooks.ts","reducers/orders/requests.ts","reducers/orders/actions.ts","reducers/orders/hooks.ts","../node_modules/@material-ui/core/esm/Card/Card.js","../node_modules/@material-ui/core/esm/CardMedia/CardMedia.js","../node_modules/@material-ui/core/esm/CardContent/CardContent.js","pages/HomePage/Book.jsx","reducers/cart/hooks.ts","components/Cart.tsx","pages/HomePage/index.js"],"names":["getCartItemsFromStorage","JSON","parse","localStorage","getItem","getCartItems","userId","a","timeout","userCartItems","find","item","items","putCartItems","cartItems","userCart","updated","exists","i","map","v","books","setItem","stringify","cartSetItems","type","ActionTypes","setItems","payload","cartFetchStart","fetchStart","cartFetchEnd","errorMessage","fetchEnd","apiGetCartItems","dispatch","console","log","apiSetCart","message","getBooksFromGoogle","fetch","result","json","getBooksFromStorage","setBooksToLocalStorage","getBooks","postBooks","savedBooks","allBooks","putBooks","updatedBooks","replace","deleteBooks","filter","book","id","setBooks","addBooks","updateBooks","removeBooks","booksFetchStart","booksFetchEnd","useGetBooks","forceFetch","useState","fetched","setFetched","useDispatch","useSelector","state","loading","hasLoaded","useEffect","googleBooks","transformedBooks","transformGoogleBookToApi","createdBooks","useBookActions","apiBooksDelete","apiBooksPost","apiBooksPut","getOrdersFromStorage","setOrdersToLocalStorage","orders","getOrdersByUser","allOrders","o","buyer","postOrders","savedOrders","putOrders","updatedOrders","setOrders","updateOrders","ordersFetchStart","ordersFetchEnd","apiGetOrdersByUser","apiPutOrders","useOrders","useOrderActions","createOrder","user","order","uuid","name","surname","username","status","orderStatuses","new","confirmOrder","paid","cancelOrder","canceled","updateOrder","useGetMyOrders","me","useMe","useGetOrdersByUserId","setFecthed","Card","React","forwardRef","props","ref","classes","className","_props$raised","raised","other","_objectWithoutProperties","createElement","Paper","_extends","clsx","root","elevation","withStyles","overflow","MEDIA_COMPONENTS","CardMedia","children","_props$component","component","Component","image","src","style","isMediaComponent","indexOf","composedStyle","backgroundImage","concat","media","img","undefined","display","backgroundSize","backgroundRepeat","backgroundPosition","width","objectFit","CardContent","padding","paddingBottom","Book","handleClick","title","author","published_date","book_cover","quantity","Grid","xs","sm","md","lg","container","spacing","direction","justify","alignItems","wrap","Typography","variant","noWrap","color","Button","onClick","useCartItemsActions","addOrIncreaseItem","useCallback","_items","addCartItem","addCartItemCount","removeOrDecreaseItem","existingItem","removeCartItem","removeCartItemCount","removeItem","Cart","openDrawer","setOpenDrawer","useCartItems","total","reduce","sum","handleAddItem","handleRemoveItem","handleRemove","CircularProgress","disabled","length","Drawer","anchor","open","onClose","List","ListItem","key","divider","ListItemAvatar","Avatar","alt","ListItemText","primary","fullWidth","BooksPage","handleAdd"],"mappings":"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","file":"static/js/10.484c365b.chunk.js","sourcesContent":["import { Book } from \"../books/types\";\nimport { timeout } from \"../helpers\";\nimport { CartItems } from \"./types\";\n\nconst getCartItemsFromStorage = (): CartItems[] =>\n  JSON.parse(localStorage.getItem(\"carts\") || \"[]\");\n\nconst setCartItemsToStorage = (books: CartItems[]) =>\n  localStorage.setItem(\"carts\", JSON.stringify(books));\n\nexport const getCartItems = async (userId: String): Promise<Book[]> => {\n  await timeout(100);\n  const userCartItems = getCartItemsFromStorage().find(\n    item => item.userId === userId\n  ) || { items: [] };\n  return userCartItems.items;\n};\n\nexport const putCartItems = async (\n  userId: String,\n  items: Book[]\n): Promise<CartItems> => {\n  // await timeout(100);\n  const cartItems = getCartItemsFromStorage();\n  const userCart = {\n    userId,\n    items\n  };\n  let updated: CartItems[] = []\n  const exists = cartItems.find(i => i.userId === userId)\n  if(!exists) {\n    updated = [...cartItems, userCart]\n  }\n  if(!!exists) {\n    updated = cartItems.map(v =>\n      v.userId === userId ? userCart : v\n    )\n  }\n  setCartItemsToStorage(updated);\n  return userCart;\n};\n","import { ActionTypes, Item } from \"./types\";\nimport { AppThunk } from \"../store\";\nimport { getCartItems, putCartItems } from \"./requests\";\n\nexport const cartSetItems = (items: Item[]) => ({\n  type: ActionTypes.setItems,\n  payload: { items }\n});\n\n// export const addItems = (items: Item[]) => ({\n//   type: ActionTypes.addItems,\n//   payload: { items }\n// });\n\n// export const removeItems = (items: Item[]) => ({\n//   type: ActionTypes.removeItems,\n//   payload: { items }\n// })\n\n// export const updateItems = (items: Item[]) => ({\n//   type: ActionTypes.updateItems,\n//   payload: { items }\n// })\n\nexport const cartFetchStart = () => ({\n  type: ActionTypes.fetchStart\n});\n\nexport const cartFetchEnd = (errorMessage?: string) => ({\n  type: ActionTypes.fetchEnd,\n  payload: { errorMessage }\n});\n\nexport const apiGetCartItems = (userId: String):AppThunk => async dispatch => {\n  dispatch(cartFetchStart())\n  try {\n    const userCartItems = await getCartItems(userId)\n    dispatch(cartSetItems(userCartItems))\n    dispatch(cartFetchEnd())\n  } catch (e) {\n    console.log(e)\n    dispatch(cartFetchEnd())\n  }\n}\n\nexport const apiSetCart = (userId: string, items: Item[]):AppThunk => async dispatch => {\n  dispatch(cartFetchStart())\n  try {\n    await putCartItems(userId, items)\n    dispatch(cartSetItems(items))\n    dispatch(cartFetchEnd())\n  } catch (e) {\n    console.log(e)\n    dispatch(cartFetchEnd(e.message))\n  }\n}\n","import { timeout, replace } from \"../helpers\";\nimport { Book } from \"./types\";\n\nexport const getBooksFromGoogle = async (): Promise<{ items: any[] }> => {\n  const result = await fetch(\n    `https://www.googleapis.com/books/v1/volumes?q=book`\n  );\n  return await result.json();\n};\n\nconst getBooksFromStorage = (): Book[] | null =>\n  JSON.parse(localStorage.getItem(\"books\") || \"null\");\n\nconst setBooksToLocalStorage = (books: Book[]) =>\n  localStorage.setItem(\"books\", JSON.stringify(books));\n\nexport const getBooks = async (): Promise<Book[] | null> => {\n  await timeout(1000);\n  return getBooksFromStorage();\n};\n\nexport const postBooks = async (books: Book[]) => {\n  await timeout(1000);\n  const savedBooks = getBooksFromStorage() || [];\n  const allBooks = [...books, ...savedBooks];\n  setBooksToLocalStorage(allBooks);\n  return books;\n};\n\nexport const putBooks = async (books: Book[]) => {\n  await timeout(1000);\n  const savedBooks = getBooksFromStorage() || [];\n  const updatedBooks = replace(books, savedBooks);\n  setBooksToLocalStorage(updatedBooks);\n};\n\nexport const deleteBooks = async (books: Book[]) => {\n  await timeout(1000);\n  const savedBooks = getBooksFromStorage() || [];\n  const updatedBooks = savedBooks.filter(\n    book => !books.find(({ id }) => id === book.id)\n  );\n  setBooksToLocalStorage(updatedBooks)\n  return books\n};\n","import { ActionTypes, Book } from \"./types\";\nimport { getBooks, postBooks, getBooksFromGoogle, putBooks, deleteBooks } from \"./requests\";\nimport { AppThunk } from \"../store\";\nimport { transformGoogleBookToApi } from \"../helpers\";\n\nexport const setBooks = (books: Book[]) => ({\n  type: ActionTypes.setBooks,\n  payload: { books }\n});\n\nexport const addBooks = (books: Book[]) => ({\n  type: ActionTypes.addBooks,\n  payload: { books }\n});\n\nexport const updateBooks = (books: Book[]) => ({\n  type: ActionTypes.updateBooks,\n  payload: { books }\n});\n\nexport const removeBooks = (books: Book[]) => ({\n  type: ActionTypes.deleteBooks,\n  payload: { books }\n});\n\nexport const booksFetchStart = () => ({\n  type: ActionTypes.fetchStart\n});\n\nexport const booksFetchEnd = (errorMessage?: string) => ({\n  type: ActionTypes.fetchEnd,\n  payload: { errorMessage }\n});\n\nexport const apiBooksGet = (): AppThunk => async dispatch => {\n  dispatch(booksFetchStart());\n  try {\n    const books = await getBooks();\n    if (books === null) {\n      const googleBooks = await getBooksFromGoogle();\n      const transformedBooks =\n        (googleBooks &&\n          googleBooks.items.map(item => transformGoogleBookToApi(item))) ||\n        [];\n      const createdBooks = await postBooks(transformedBooks);\n      dispatch(setBooks(createdBooks));\n    }\n    if (!!books) {\n      dispatch(setBooks(books));\n    }\n    dispatch(booksFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(booksFetchEnd(e.message));\n  }\n};\n\nexport const apiBooksPost = (books: Book[]): AppThunk => async dispatch => {\n  dispatch(booksFetchStart());\n  try {\n    const createdBooks = await postBooks(books);\n    dispatch(addBooks(createdBooks));\n    dispatch(booksFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(booksFetchEnd(e.message));\n  }\n};\n\nexport const apiBooksPut = (books: Book[]): AppThunk => async dispatch => {\n  dispatch(booksFetchStart());\n  try {\n    await putBooks(books);\n    dispatch(updateBooks(books));\n    dispatch(booksFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(booksFetchEnd(e.message));\n  }\n};\n\nexport const apiBooksDelete = (books: Book[]): AppThunk => async dispatch => {\n  dispatch(booksFetchStart());\n  try {\n    await deleteBooks(books);\n    dispatch(removeBooks(books));\n    dispatch(booksFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(booksFetchEnd(e.message));\n  }\n};\n","import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootReducer } from \"../rootReducer\";\nimport { apiBooksGet, apiBooksDelete, apiBooksPost, apiBooksPut } from \"./actions\";\nimport { Book } from \"./types\";\n\nexport const useGetBooks = (forceFetch?: boolean) => {\n  const [fetched, setFetched] = useState(!forceFetch)\n  const dispatch = useDispatch();\n  const { books, loading, hasLoaded, errorMessage } = useSelector(\n    (state: RootReducer) => state.books\n  );\n\n  useEffect(() => {\n    if ((!hasLoaded || !fetched) && !loading) {\n      setFetched(true)\n      dispatch(apiBooksGet());\n    }\n  }, [hasLoaded, loading, forceFetch, dispatch, fetched]);\n\n  return {\n    books,\n    loading,\n    hasLoaded,\n    errorMessage\n  }\n};\n\nexport const useBookActions = () => {\n  const dispatch = useDispatch();\n  return {\n    deleteBooks: (books: Book[]) => dispatch(apiBooksDelete(books)),\n    addBooks: (books: Book[]) => dispatch(apiBooksPost(books)),\n    updateBooks: (books: Book[]) => dispatch(apiBooksPut(books)),\n  }\n}\n","import { Order } from \"./types\";\nimport { timeout, replace } from \"../helpers\";\n\nconst getOrdersFromStorage = (): Order[] => JSON.parse(localStorage.getItem('orders') ||  \"[]\")\n\nconst setOrdersToLocalStorage = (orders: Order[]) => localStorage.setItem('orders', JSON.stringify(orders))\n\nexport const getOrders = async():Promise<Order[]> => {\n  await timeout(1000)\n  return getOrdersFromStorage()\n}\n\nexport const getOrdersByUser = async(userId: string): Promise<Order[]> => {\n  await timeout(1000)\n  const allOrders = getOrdersFromStorage()\n  return allOrders.filter(o => o.buyer.id === userId)\n}\n\nexport const postOrders = async(orders: Order[]) => {\n  await timeout(1000);\n  const savedOrders = getOrdersFromStorage();\n  const allOrders = [...orders, ...savedOrders]\n  setOrdersToLocalStorage(allOrders)\n  return allOrders\n}\n\nexport const putOrders = async(orders: Order[]) => {\n  await timeout(1000)\n  const savedOrders = getOrdersFromStorage();\n  const updatedOrders = replace(orders, savedOrders)\n  setOrdersToLocalStorage(updatedOrders)\n}\n","import { Order, ActionTypes } from \"./types\";\nimport { AppThunk } from \"../store\";\nimport { getOrders, postOrders, getOrdersByUser, putOrders } from \"./requests\";\nimport { apiSetCart } from \"../cart/actions\";\n\nexport const setOrders = (orders: Order[]) => ({\n  type: ActionTypes.setOrders,\n  payload: { orders }\n})\n\nexport const updateOrders = (orders: Order[]) => ({\n  type: ActionTypes.updateOrders,\n  payload: { orders }\n})\n\nexport const ordersFetchStart = () => ({\n  type: ActionTypes.fetchStart\n})\n\nexport const ordersFetchEnd = () => ({\n  type: ActionTypes.fetchEnd\n})\n\nexport const apiOrdersGet = ():AppThunk => async dispatch => {\n  dispatch(ordersFetchStart())\n  try {\n    const orders = await getOrders();\n    dispatch(setOrders(orders))\n    dispatch(ordersFetchEnd())\n  } catch(e) {\n    console.log(e)\n    dispatch(ordersFetchEnd())\n  }\n}\n\nexport const apiGetOrdersByUser = (userId: string):AppThunk => async dispatch => {\n  dispatch(ordersFetchStart())\n  try {\n    const orders = await getOrdersByUser(userId);\n    dispatch(setOrders(orders))\n    dispatch(ordersFetchEnd())\n  } catch(e) {\n    console.log(e)\n    dispatch(ordersFetchEnd())\n  }\n}\n\nexport const apiOrderPost = (order: Order):AppThunk => async dispatch => {\n  dispatch(ordersFetchStart())\n  try {\n    const orders = await postOrders([order]);\n    dispatch(setOrders(orders))\n    dispatch(apiSetCart(order.buyer.id, []))\n    dispatch(ordersFetchEnd())\n  } catch(e) {\n    console.log(e)\n    dispatch(ordersFetchEnd())\n  }\n}\n\nexport const apiPutOrders = (orders: Order[]):AppThunk => async dispatch => {\n  dispatch(ordersFetchStart())\n  try {\n    await putOrders(orders)\n    dispatch(updateOrders(orders))\n    dispatch(ordersFetchEnd())\n  } catch(e) {\n    console.log(e)\n    dispatch(ordersFetchEnd())\n  }\n}\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { uuid } from \"uuidv4\";\nimport { User } from \"../users/types\";\nimport { Item } from \"../cart/types\";\nimport { apiOrderPost, apiGetOrdersByUser, apiPutOrders } from \"./actions\";\nimport { orderStatuses, Order } from \"./types\";\nimport { useMe } from \"../me/hooks\";\nimport { RootReducer } from \"../rootReducer\";\nimport { useEffect, useState } from \"react\";\n\nexport const useOrders = () => {\n  return useSelector((state: RootReducer) => state.orders);\n};\n\nexport const useOrderActions = () => {\n  const dispatch = useDispatch();\n\n  return {\n    createOrder: (user: User, cartItems: Item[]) =>\n      dispatch(\n        apiOrderPost({\n          id: uuid(),\n          buyer: {\n            id: user.id,\n            name: user.name,\n            surname: user.surname,\n            username: user.username\n          },\n          status: orderStatuses.new,\n          items: cartItems\n        })\n      ),\n    confirmOrder: (order: Order) =>\n      dispatch(apiPutOrders([{ ...order, status: orderStatuses.paid }])),\n    cancelOrder: (order: Order) =>\n      dispatch(apiPutOrders([{ ...order, status: orderStatuses.canceled }])),\n    updateOrder: (order: Order) => dispatch(apiPutOrders([order]))\n  };\n};\n\nexport const useGetMyOrders = () => {\n  const dispatch = useDispatch();\n  const me = useMe();\n  const orders = useSelector((state: RootReducer) => state.orders);\n\n  useEffect(() => {\n    if (!orders.hasLoaded && !orders.loading && me.me && me.me.id) {\n      dispatch(apiGetOrdersByUser(me.me.id));\n    }\n  });\n\n  return {\n    ...orders,\n    loading: me.loading || orders.loading\n  };\n};\n\nexport const useGetOrdersByUserId = (userId: string) => {\n  const [fetched, setFecthed] = useState(false)\n  const dispatch = useDispatch();\n  const { orders, loading, hasLoaded} = useSelector((state: RootReducer) => state.orders);\n\n  useEffect(() => {\n    if (userId && !fetched && !loading) {\n      setFecthed(true)\n      dispatch(apiGetOrdersByUser(userId));\n    }\n  }, [userId, loading, dispatch, fetched]);\n\n  return {\n    orders,\n    loading,\n    hasLoaded\n  }\n};\n\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    overflow: 'hidden'\n  }\n};\nvar Card = React.forwardRef(function Card(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$raised = props.raised,\n      raised = _props$raised === void 0 ? false : _props$raised,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"raised\"]);\n\n  return React.createElement(Paper, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : 1,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes = {\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the card will use raised styling.\n   */\n  raised: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCard'\n})(Card);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { chainPropTypes } from '@material-ui/utils';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'block',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n\n  /* Styles applied to the root element if `component=\"video, audio, picture, iframe, or img\"`. */\n  media: {\n    width: '100%'\n  },\n\n  /* Styles applied to the root element if `component=\"picture or img\"`. */\n  img: {\n    // ⚠️ object-fit is not supported by IE 11.\n    objectFit: 'cover'\n  }\n};\nvar MEDIA_COMPONENTS = ['video', 'audio', 'picture', 'iframe', 'img'];\nvar CardMedia = React.forwardRef(function CardMedia(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      image = props.image,\n      src = props.src,\n      style = props.style,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"component\", \"image\", \"src\", \"style\"]);\n\n  var isMediaComponent = MEDIA_COMPONENTS.indexOf(Component) !== -1;\n  var composedStyle = !isMediaComponent && image ? _extends({\n    backgroundImage: \"url(\\\"\".concat(image, \"\\\")\")\n  }, style) : style;\n  return React.createElement(Component, _extends({\n    className: clsx(classes.root, className, isMediaComponent && classes.media, \"picture img\".indexOf(Component) !== -1 && classes.img),\n    ref: ref,\n    style: composedStyle,\n    src: isMediaComponent ? image || src : undefined\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? CardMedia.propTypes = {\n  /**\n   * The content of the component.\n   */\n  children: chainPropTypes(PropTypes.node, function (props) {\n    if (!props.children && !props.image && !props.src) {\n      return new Error('Material-UI: either `children`, `image` or `src` prop must be specified.');\n    }\n\n    return null;\n  }),\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * Component for rendering image.\n   * Either a string to use a DOM element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * Image to be displayed as a background image.\n   * Either `image` or `src` prop must be specified.\n   * Note that caller must specify height otherwise the image will not be visible.\n   */\n  image: PropTypes.string,\n\n  /**\n   * An alias for `image` property.\n   * Available only with media components.\n   * Media components: `video`, `audio`, `picture`, `iframe`, `img`.\n   */\n  src: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  style: PropTypes.object\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardMedia'\n})(CardMedia);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  }\n};\nvar CardContent = React.forwardRef(function CardContent(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\"]);\n\n  return React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? CardContent.propTypes = {\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a DOM element or a component.\n   */\n  component: PropTypes.elementType\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardContent'\n})(CardContent);","import React from \"react\";\nimport {\n  Card,\n  CardContent,\n  Typography,\n  CardMedia,\n  Button,\n  Grid\n} from \"@material-ui/core\";\n\nconst Book = ({ book, handleClick }) => {\n  const { id, title, author, published_date, book_cover, quantity } = book;\n  return (\n    <Grid item xs={12} sm={6} md={6} lg={3}>\n      <Card raised>\n        <Grid container spacing={1} direction=\"row\" justify=\"center\" alignItems=\"center\">\n          <Grid item xs={4} sm={3}>\n            <CardMedia\n              image={book_cover}\n              component=\"img\"\n              title={`${title} image`}\n            />\n          </Grid>\n\n          <Grid item xs={8}>\n            <CardContent>\n              <Grid container direction=\"column\" wrap=\"nowrap\">\n                <Typography component=\"h6\" variant=\"h6\">\n                  {title}\n                </Typography>\n                <Typography noWrap variant=\"subtitle2\" color=\"textSecondary\">\n                  {`ID: ${id}`}\n                </Typography>\n                <Typography variant=\"subtitle2\" color=\"textSecondary\">\n                  {author}\n                </Typography>\n                <Typography noWrap variant=\"subtitle2\" color=\"textSecondary\">\n                  {published_date}\n                </Typography>\n                <Typography noWrap variant=\"subtitle2\" color=\"textSecondary\">\n                  {`Quantity: ${quantity}`}\n                </Typography>\n\n                <Grid container spacing={1}>\n                  <Button variant=\"outlined\" onClick={() => handleClick(book)}>\n                    Add to Cart\n                  </Button>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Grid>\n        </Grid>\n      </Card>\n    </Grid>\n  );\n};\n\nexport default Book;\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { RootReducer } from \"../rootReducer\";\nimport { useEffect, useCallback } from \"react\";\nimport { apiGetCartItems, apiSetCart } from \"./actions\";\nimport { exists, addCartItem, addCartItemCount, removeCartItemCount, removeCartItem } from \"../helpers\";\nimport { Item } from \"./types\";\n\nexport const useCartItems = (userId: string) => {\n  const dispatch = useDispatch();\n  const { items, loading, hasLoaded } = useSelector(\n    (state: RootReducer) => state.cartItems\n  );\n\n  useEffect(() => {\n    if (userId && !hasLoaded && !loading) {\n      dispatch(apiGetCartItems(userId));\n    }\n  }, [userId, hasLoaded, loading, dispatch]);\n\n  return { items, loading, hasLoaded };\n};\n\nexport const useCartItemsActions = () => {\n  const dispatch = useDispatch();\n  const { items } = useSelector((state: RootReducer) => state.cartItems);\n\n  const addOrIncreaseItem = useCallback(\n    (userId: string, item: Item) => {\n      const existingItem: Item = exists(item.id, items);\n      if (!existingItem) {\n        const _items = addCartItem(item, items);\n        return dispatch(apiSetCart(userId, _items));\n      }\n      const _items = addCartItemCount(item, items);\n      return dispatch(apiSetCart(userId, _items));\n    },\n    [items, dispatch]\n  );\n\n  const removeOrDecreaseItem = useCallback(\n    (userId: string, item: Item) => {\n      const existingItem: Item = exists(item.id, items);\n      if (existingItem && existingItem.quantity === 1) {\n        const _items = removeCartItem(item, items)\n        return dispatch(apiSetCart(userId, _items));\n      }\n      const _items = removeCartItemCount(item, items)\n      return dispatch(apiSetCart(userId, _items));\n    },\n    [items, dispatch]\n  );\n\n  const removeItem = useCallback(\n    (userId: string, item: Item) => {\n      const _items = items.filter(({ id}) => id!==item.id)\n      return dispatch(apiSetCart(userId, _items));\n    },\n    [items, dispatch]\n  );\n  \n\n  return {\n    addOrIncreaseItem,\n    removeOrDecreaseItem,\n    removeItem\n  };\n};\n","import React, { useState } from \"react\";\nimport { useCartItems, useCartItemsActions } from \"../reducers/cart/hooks\";\nimport { useMe } from \"../reducers/me/hooks\";\nimport {\n  Grid,\n  Drawer,\n  Button,\n  List,\n  ListItem,\n  ListItemText,\n  Avatar,\n  ListItemAvatar,\n  CircularProgress\n} from \"@material-ui/core\";\nimport { Item } from \"../reducers/cart/types\";\nimport { useOrderActions, useOrders } from \"../reducers/orders/hooks\";\n\nconst Cart = () => {\n  const [openDrawer, setOpenDrawer] = useState(false);\n  const { me } = useMe();\n  const { items } = useCartItems((me && me.id) || \"\");\n  const {\n    addOrIncreaseItem,\n    removeOrDecreaseItem,\n    removeItem\n  } = useCartItemsActions();\n  const { loading } = useOrders();\n\n  const { createOrder } = useOrderActions();\n\n  const total = items.reduce((sum, { quantity }) => (sum += quantity), 0);\n\n  const handleOpenDrawer = () => total > 0 && setOpenDrawer(true);\n  const handleCloseDrawer = () => setOpenDrawer(false);\n  const handleAddItem = (item: Item) => () =>\n    me && me.id && addOrIncreaseItem(me.id, item);\n  const handleRemoveItem = (item: Item) => () =>\n    me && me.id && removeOrDecreaseItem(me.id, item);\n  const handleRemove = (item: Item) => () =>\n    me && me.id && removeItem(me.id, item);\n  const handleCreateOrderClick = () => {\n    if (me) {\n      setOpenDrawer(false);\n      return createOrder(me, items);\n    }\n  };\n\n  if (!me) {\n    return null;\n  }\n  return (\n    <Grid container justify=\"flex-end\">\n      {loading && <CircularProgress />}\n      <Button\n        disabled={!!loading || items.length === 0}\n        onClick={handleOpenDrawer}\n      >{`Cart: ${total}`}</Button>\n      <Drawer anchor=\"right\" open={openDrawer} onClose={handleCloseDrawer}>\n        <Grid container>\n          <List>\n            {items.map(item => (\n              <ListItem key={`${item.id}`} divider>\n                <ListItemAvatar>\n                  <Avatar\n                    alt={item.title}\n                    src={item.book_cover}\n                    variant=\"square\"\n                  />\n                </ListItemAvatar>\n                <ListItemText primary={item.title} />\n                <div>\n                  <Button onClick={handleRemoveItem(item)}>{`<`}</Button>\n                  <span>{`Quantity: ${item.quantity}`}</span>\n                  <Button onClick={handleAddItem(item)}>{`>`}</Button>\n                </div>\n                <div>\n                  <Button onClick={handleRemove(item)}>Remove</Button>\n                </div>\n              </ListItem>\n            ))}\n          </List>\n        </Grid>\n\n        {items.length > 0 && (\n          <Grid container justify=\"center\">\n            <Button\n              onClick={handleCreateOrderClick}\n              variant=\"contained\"\n              fullWidth={false}\n            >\n              Create Order\n            </Button>\n          </Grid>\n        )}\n      </Drawer>\n    </Grid>\n  );\n};\n\nexport default Cart;\n","import React from \"react\";\nimport { useGetBooks } from \"../../reducers/books/hooks\";\nimport { CircularProgress, Grid } from \"@material-ui/core\";\nimport Book from \"./Book\";\nimport { useCartItemsActions } from \"../../reducers/cart/hooks\";\nimport Cart from \"../../components/Cart\";\nimport { useMe } from \"../../reducers/me/hooks\";\n\nconst BooksPage = () => {\n  const { books, loading } = useGetBooks();\n  const { addOrIncreaseItem } = useCartItemsActions();\n  const { me } = useMe()\n  const handleAdd = item => me && me.id && addOrIncreaseItem(me.id, item);\n  return (\n    <div>\n      {loading && <CircularProgress />}\n      {!loading && (\n        <Grid container spacing={1}>\n          <Cart />\n          {books.map(book => (\n            <Book key={book.id} book={book} handleClick={handleAdd} />\n          ))}\n        </Grid>\n      )}\n    </div>\n  );\n};\n\nexport default BooksPage;\n"],"sourceRoot":""}