{"version":3,"sources":["reducers/cart/requests.ts","reducers/cart/actions.ts","reducers/books/crud.ts","reducers/books/actions.ts","reducers/books/hooks.ts","reducers/orders/crud.ts","reducers/orders/actions.ts","reducers/orders/hooks.ts","../node_modules/@material-ui/core/esm/Card/Card.js","../node_modules/@material-ui/core/esm/CardMedia/CardMedia.js","../node_modules/@material-ui/core/esm/CardContent/CardContent.js","pages/HomePage/Book.jsx","reducers/cart/hooks.ts","components/Cart.tsx","pages/HomePage/index.js"],"names":["getCartItemsFromStorage","JSON","parse","localStorage","getItem","getCartItems","userId","a","timeout","userCartItems","find","item","items","putCartItems","cartItems","userCart","updated","exists","i","map","v","books","setItem","stringify","cartSetItems","type","ActionTypes","setItems","payload","cartFetchStart","fetchStart","cartFetchEnd","errorMessage","fetchEnd","apiGetCartItems","dispatch","console","log","apiSetCart","message","crud","getItems","createItems","updateItems","deleteItems","postBooks","putBooks","requiredAdmin","deleteBooks","setBooks","updateBooks","removeBooks","booksFetchStart","booksFetchEnd","useGetBooks","forceFetch","useState","fetched","setFetched","useDispatch","useSelector","state","loading","hasLoaded","useEffect","getBooks","length","getGoogleBooksToApi","newBooks","_books","useBookActions","me","useMe","addBooks","apiBooksPost","id","apiBooksDelete","apiBooksPut","getOrders","postOrders","putOrders","getOrdersByUser","allOrders","filter","o","buyer","setOrders","orders","updateOrders","ordersFetchStart","ordersFetchEnd","apiGetOrdersByUser","apiPutOrders","useOrders","useOrderActions","createOrder","user","order","uuid","name","surname","username","status","orderStatuses","new","confirmOrder","paid","cancelOrder","canceled","updateOrder","useGetMyOrders","useGetOrdersByUserId","setFecthed","Card","React","forwardRef","props","ref","classes","className","_props$raised","raised","other","_objectWithoutProperties","createElement","Paper","_extends","clsx","root","elevation","withStyles","overflow","MEDIA_COMPONENTS","CardMedia","children","_props$component","component","Component","image","src","style","isMediaComponent","indexOf","composedStyle","backgroundImage","concat","media","img","undefined","display","backgroundSize","backgroundRepeat","backgroundPosition","width","objectFit","CardContent","padding","paddingBottom","Book","book","handleClick","title","author","published_date","book_cover","quantity","Grid","xs","sm","md","lg","container","spacing","direction","justify","alignItems","wrap","Typography","noWrap","variant","color","Button","onClick","useCartItemsActions","addOrIncreaseItem","useCallback","_items","addCartItem","addCartItemCount","removeOrDecreaseItem","existingItem","removeCartItem","removeCartItemCount","removeItem","Cart","openDrawer","setOpenDrawer","useCartItems","total","reduce","sum","handleAddItem","handleRemoveItem","handleRemove","CircularProgress","disabled","Drawer","anchor","open","onClose","List","ListItem","key","divider","ListItemAvatar","Avatar","alt","ListItemText","primary","fullWidth","BooksPage","handleAdd"],"mappings":"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","file":"static/js/9.8f8c3f78.chunk.js","sourcesContent":["import { Book } from '../books/types';\nimport { timeout } from '../helpers';\nimport { CartItems } from './types';\n\nconst getCartItemsFromStorage = (): CartItems[] => JSON.parse(localStorage.getItem('carts') || '[]');\n\nconst setCartItemsToStorage = (books: CartItems[]) => localStorage.setItem('carts', JSON.stringify(books));\n\nexport const getCartItems = async (userId: string): Promise<Book[]> => {\n  await timeout(100);\n  const userCartItems = getCartItemsFromStorage().find(item => item.userId === userId) || { items: [] };\n  return userCartItems.items;\n};\n\nexport const putCartItems = async (userId: string, items: Book[]): Promise<CartItems> => {\n  // await timeout(100);\n  const cartItems = getCartItemsFromStorage();\n  const userCart = {\n    userId,\n    items,\n  };\n  let updated: CartItems[] = [];\n  const exists = cartItems.find(i => i.userId === userId);\n  if (!exists) {\n    updated = [...cartItems, userCart];\n  }\n  if (!!exists) {\n    updated = cartItems.map(v => (v.userId === userId ? userCart : v));\n  }\n  setCartItemsToStorage(updated);\n  return userCart;\n};\n","import { ActionTypes, Item } from './types';\nimport { AppThunk } from '../store';\nimport { getCartItems, putCartItems } from './requests';\n\nexport const cartSetItems = (items: Item[]) => ({\n  type: ActionTypes.setItems,\n  payload: { items },\n});\n\nexport const cartFetchStart = () => ({\n  type: ActionTypes.fetchStart,\n});\n\nexport const cartFetchEnd = (errorMessage?: string) => ({\n  type: ActionTypes.fetchEnd,\n  payload: { errorMessage },\n});\n\nexport const apiGetCartItems = (userId: string): AppThunk => async dispatch => {\n  dispatch(cartFetchStart());\n  try {\n    const userCartItems = await getCartItems(userId);\n    dispatch(cartSetItems(userCartItems));\n    dispatch(cartFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(cartFetchEnd());\n  }\n};\n\nexport const apiSetCart = (userId: string, items: Item[]): AppThunk => async dispatch => {\n  dispatch(cartFetchStart());\n  try {\n    await putCartItems(userId, items);\n    dispatch(cartSetItems(items));\n    dispatch(cartFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(cartFetchEnd(e.message));\n  }\n};\n","import { Book } from './types';\nimport { requiredAdmin, crud } from '../helpers';\n\nconst { getItems, createItems, updateItems, deleteItems } = crud<Book>('books');\n\nexport { getItems as getBooks };\n\nexport const postBooks = createItems;\n\nexport const putBooks = requiredAdmin(updateItems);\n\nexport const deleteBooks = requiredAdmin(deleteItems);\n","import { ActionTypes, Book } from './types';\nimport { AppThunk } from '../store';\nimport { getGoogleBooksToApi } from '../helpers';\nimport { getBooks, putBooks, deleteBooks, postBooks } from './crud';\nimport { Me } from '../me/types';\n\nexport const setBooks = (books: Book[]) => ({\n  type: ActionTypes.setBooks,\n  payload: { books },\n});\n\nexport const addBooks = (books: Book[]) => ({\n  type: ActionTypes.addBooks,\n  payload: { books },\n});\n\nexport const updateBooks = (books: Book[]) => ({\n  type: ActionTypes.updateBooks,\n  payload: { books },\n});\n\nexport const removeBooks = (books: Book[]) => ({\n  type: ActionTypes.deleteBooks,\n  payload: { books },\n});\n\nexport const booksFetchStart = () => ({\n  type: ActionTypes.fetchStart,\n});\n\nexport const booksFetchEnd = (errorMessage?: string) => ({\n  type: ActionTypes.fetchEnd,\n  payload: { errorMessage },\n});\n\nexport const apiBooksGet = (): AppThunk => async dispatch => {\n  dispatch(booksFetchStart());\n  try {\n    const books = await getBooks();\n    if (books.length === 0) {\n      const newBooks = await getGoogleBooksToApi();\n      const _books = await postBooks(newBooks);\n      dispatch(setBooks(_books));\n      return dispatch(booksFetchEnd());\n    }\n    if (books.length > 0) {\n      dispatch(setBooks(books));\n      dispatch(booksFetchEnd());\n    }\n  } catch (e) {\n    console.log(e);\n    dispatch(booksFetchEnd(e.message));\n  }\n};\n\nexport const apiBooksPost = (books: Book[]): AppThunk => async dispatch => {\n  dispatch(booksFetchStart());\n  try {\n    const _books = await postBooks(books);\n    dispatch(setBooks(_books));\n    dispatch(booksFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(booksFetchEnd(e.message));\n  }\n};\n\nexport const apiBooksPut = (me: Me, books: Book[]): AppThunk => async dispatch => {\n  dispatch(booksFetchStart());\n  try {\n    const _books = await putBooks(me, books);\n    dispatch(updateBooks(_books));\n    dispatch(booksFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(booksFetchEnd(e.message));\n  }\n};\n\nexport const apiBooksDelete = (me: Me, books: Book[]): AppThunk => async dispatch => {\n  dispatch(booksFetchStart());\n  try {\n    const _books = await deleteBooks(\n      me,\n      books.map(({ id }) => id),\n    );\n    dispatch(removeBooks(_books));\n    dispatch(booksFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(booksFetchEnd(e.message));\n  }\n};\n","import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootReducer } from '../rootReducer';\nimport { apiBooksGet, apiBooksDelete, apiBooksPost, apiBooksPut } from './actions';\nimport { Book } from './types';\nimport { useMe } from '../me/hooks';\n\nexport const useGetBooks = (forceFetch?: boolean) => {\n  const [fetched, setFetched] = useState(!forceFetch);\n  const dispatch = useDispatch();\n  const { books, loading, hasLoaded, errorMessage } = useSelector((state: RootReducer) => state.books);\n\n  useEffect(() => {\n    if ((!hasLoaded || !fetched) && !loading) {\n      setFetched(true);\n      dispatch(apiBooksGet());\n    }\n  }, [hasLoaded, loading, forceFetch, dispatch, fetched]);\n\n  return {\n    books,\n    loading,\n    hasLoaded,\n    errorMessage,\n  };\n};\n\nexport const useBookActions = () => {\n  const dispatch = useDispatch();\n  const { me } = useMe();\n  return {\n    addBooks: (books: Book[]) => dispatch(apiBooksPost(books)),\n    deleteBooks: (books: Book[]) => me && dispatch(apiBooksDelete(me, books)),\n    updateBooks: (books: Book[]) => me && dispatch(apiBooksPut(me, books)),\n  };\n};\n","import { Order } from './types';\nimport { crud } from '../helpers';\n\nconst { getItems, createItems, updateItems } = crud<Order>('orders');\n\nexport const getOrders = getItems;\n\nexport const postOrders = createItems;\n\nexport const putOrders = updateItems;\n\nexport const getOrdersByUser = async (userId: string): Promise<Order[]> => {\n  const allOrders = await getOrders();\n  return allOrders.filter(o => o.buyer.id === userId);\n};\n","import { Order, ActionTypes } from './types';\nimport { AppThunk } from '../store';\nimport { getOrders, postOrders, getOrdersByUser, putOrders } from './crud';\nimport { apiSetCart } from '../cart/actions';\n\nexport const setOrders = (orders: Order[]) => ({\n  type: ActionTypes.setOrders,\n  payload: { orders },\n});\n\nexport const updateOrders = (orders: Order[]) => ({\n  type: ActionTypes.updateOrders,\n  payload: { orders },\n});\n\nexport const ordersFetchStart = () => ({\n  type: ActionTypes.fetchStart,\n});\n\nexport const ordersFetchEnd = () => ({\n  type: ActionTypes.fetchEnd,\n});\n\nexport const apiOrdersGet = (): AppThunk => async dispatch => {\n  dispatch(ordersFetchStart());\n  try {\n    const orders = await getOrders();\n    dispatch(setOrders(orders));\n    dispatch(ordersFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(ordersFetchEnd());\n  }\n};\n\nexport const apiGetOrdersByUser = (userId: string): AppThunk => async dispatch => {\n  dispatch(ordersFetchStart());\n  try {\n    const orders = await getOrdersByUser(userId);\n    dispatch(setOrders(orders));\n    dispatch(ordersFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(ordersFetchEnd());\n  }\n};\n\nexport const apiOrderPost = (order: Order): AppThunk => async dispatch => {\n  dispatch(ordersFetchStart());\n  try {\n    const orders = await postOrders([order]);\n    dispatch(setOrders(orders));\n    dispatch(apiSetCart(order.buyer.id, []));\n    dispatch(ordersFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(ordersFetchEnd());\n  }\n};\n\nexport const apiPutOrders = (orders: Order[]): AppThunk => async dispatch => {\n  dispatch(ordersFetchStart());\n  try {\n    await putOrders(orders);\n    dispatch(updateOrders(orders));\n    dispatch(ordersFetchEnd());\n  } catch (e) {\n    console.log(e);\n    dispatch(ordersFetchEnd());\n  }\n};\n","import { useDispatch, useSelector } from 'react-redux';\nimport { uuid } from 'uuidv4';\nimport { User } from '../users/types';\nimport { Item } from '../cart/types';\nimport { apiOrderPost, apiGetOrdersByUser, apiPutOrders } from './actions';\nimport { orderStatuses, Order } from './types';\nimport { useMe } from '../me/hooks';\nimport { RootReducer } from '../rootReducer';\nimport { useEffect, useState } from 'react';\n\nexport const useOrders = () => {\n  return useSelector((state: RootReducer) => state.orders);\n};\n\nexport const useOrderActions = () => {\n  const dispatch = useDispatch();\n\n  return {\n    createOrder: (user: User, cartItems: Item[]) =>\n      dispatch(\n        apiOrderPost({\n          id: uuid(),\n          buyer: {\n            id: user.id,\n            name: user.name,\n            surname: user.surname,\n            username: user.username,\n          },\n          status: orderStatuses.new,\n          items: cartItems,\n        }),\n      ),\n    confirmOrder: (order: Order) => dispatch(apiPutOrders([{ ...order, status: orderStatuses.paid }])),\n    cancelOrder: (order: Order) => dispatch(apiPutOrders([{ ...order, status: orderStatuses.canceled }])),\n    updateOrder: (order: Order) => dispatch(apiPutOrders([order])),\n  };\n};\n\nexport const useGetMyOrders = () => {\n  const dispatch = useDispatch();\n  const me = useMe();\n  const orders = useSelector((state: RootReducer) => state.orders);\n\n  useEffect(() => {\n    if (!orders.hasLoaded && !orders.loading && me.me && me.me.id) {\n      dispatch(apiGetOrdersByUser(me.me.id));\n    }\n  });\n\n  return {\n    ...orders,\n    loading: me.loading || orders.loading,\n  };\n};\n\nexport const useGetOrdersByUserId = (userId: string) => {\n  const [fetched, setFecthed] = useState(false);\n  const dispatch = useDispatch();\n  const { orders, loading, hasLoaded } = useSelector((state: RootReducer) => state.orders);\n\n  useEffect(() => {\n    if (userId && !fetched && !loading) {\n      setFecthed(true);\n      dispatch(apiGetOrdersByUser(userId));\n    }\n  }, [userId, loading, dispatch, fetched]);\n\n  return {\n    orders,\n    loading,\n    hasLoaded,\n  };\n};\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    overflow: 'hidden'\n  }\n};\nvar Card = React.forwardRef(function Card(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$raised = props.raised,\n      raised = _props$raised === void 0 ? false : _props$raised,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"raised\"]);\n\n  return React.createElement(Paper, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : 1,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes = {\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the card will use raised styling.\n   */\n  raised: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCard'\n})(Card);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { chainPropTypes } from '@material-ui/utils';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'block',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n\n  /* Styles applied to the root element if `component=\"video, audio, picture, iframe, or img\"`. */\n  media: {\n    width: '100%'\n  },\n\n  /* Styles applied to the root element if `component=\"picture or img\"`. */\n  img: {\n    // ⚠️ object-fit is not supported by IE 11.\n    objectFit: 'cover'\n  }\n};\nvar MEDIA_COMPONENTS = ['video', 'audio', 'picture', 'iframe', 'img'];\nvar CardMedia = React.forwardRef(function CardMedia(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      image = props.image,\n      src = props.src,\n      style = props.style,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"component\", \"image\", \"src\", \"style\"]);\n\n  var isMediaComponent = MEDIA_COMPONENTS.indexOf(Component) !== -1;\n  var composedStyle = !isMediaComponent && image ? _extends({\n    backgroundImage: \"url(\\\"\".concat(image, \"\\\")\")\n  }, style) : style;\n  return React.createElement(Component, _extends({\n    className: clsx(classes.root, className, isMediaComponent && classes.media, \"picture img\".indexOf(Component) !== -1 && classes.img),\n    ref: ref,\n    style: composedStyle,\n    src: isMediaComponent ? image || src : undefined\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? CardMedia.propTypes = {\n  /**\n   * The content of the component.\n   */\n  children: chainPropTypes(PropTypes.node, function (props) {\n    if (!props.children && !props.image && !props.src) {\n      return new Error('Material-UI: either `children`, `image` or `src` prop must be specified.');\n    }\n\n    return null;\n  }),\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * Component for rendering image.\n   * Either a string to use a DOM element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * Image to be displayed as a background image.\n   * Either `image` or `src` prop must be specified.\n   * Note that caller must specify height otherwise the image will not be visible.\n   */\n  image: PropTypes.string,\n\n  /**\n   * An alias for `image` property.\n   * Available only with media components.\n   * Media components: `video`, `audio`, `picture`, `iframe`, `img`.\n   */\n  src: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  style: PropTypes.object\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardMedia'\n})(CardMedia);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  }\n};\nvar CardContent = React.forwardRef(function CardContent(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\"]);\n\n  return React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? CardContent.propTypes = {\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a DOM element or a component.\n   */\n  component: PropTypes.elementType\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardContent'\n})(CardContent);","import React from 'react';\nimport { Card, CardContent, Typography, CardMedia, Button, Grid } from '@material-ui/core';\n\nconst Book = ({ book, handleClick }) => {\n  const { id, title, author, published_date, book_cover, quantity } = book;\n  return (\n    <Grid item xs={12} sm={6} md={6} lg={3}>\n      <Card raised>\n        <Grid container spacing={1} direction=\"row\" justify=\"center\" alignItems=\"center\">\n          <Grid item xs={4} sm={3}>\n            <CardMedia image={book_cover} component=\"img\" title={`${title} image`} />\n          </Grid>\n\n          <Grid item xs={8}>\n            <CardContent>\n              <Grid container direction=\"column\" wrap=\"nowrap\">\n                <Typography noWrap component=\"h6\" variant=\"h6\">\n                  {title}\n                </Typography>\n                <Typography noWrap variant=\"subtitle2\" color=\"textSecondary\">\n                  {`ID: ${id}`}\n                </Typography>\n                <Typography variant=\"subtitle2\" color=\"textSecondary\">\n                  {author}\n                </Typography>\n                <Typography noWrap variant=\"subtitle2\" color=\"textSecondary\">\n                  {published_date}\n                </Typography>\n                <Typography noWrap variant=\"subtitle2\" color=\"textSecondary\">\n                  {`Quantity: ${quantity}`}\n                </Typography>\n\n                <Grid container spacing={1}>\n                  <Button variant=\"outlined\" onClick={() => handleClick(book)}>\n                    Add to Cart\n                  </Button>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Grid>\n        </Grid>\n      </Card>\n    </Grid>\n  );\n};\n\nexport default Book;\n","import { useDispatch, useSelector } from 'react-redux';\nimport { RootReducer } from '../rootReducer';\nimport { useEffect, useCallback } from 'react';\nimport { apiGetCartItems, apiSetCart } from './actions';\nimport { exists, addCartItem, addCartItemCount, removeCartItemCount, removeCartItem } from '../helpers';\nimport { Item } from './types';\n\nexport const useCartItems = (userId: string) => {\n  const dispatch = useDispatch();\n  const { items, loading, hasLoaded } = useSelector((state: RootReducer) => state.cartItems);\n\n  useEffect(() => {\n    if (userId && !hasLoaded && !loading) {\n      dispatch(apiGetCartItems(userId));\n    }\n  }, [userId, hasLoaded, loading, dispatch]);\n\n  return { items, loading, hasLoaded };\n};\n\nexport const useCartItemsActions = () => {\n  const dispatch = useDispatch();\n  const { items } = useSelector((state: RootReducer) => state.cartItems);\n\n  const addOrIncreaseItem = useCallback(\n    (userId: string, item: Item) => {\n      const existingItem: Item = exists(item.id, items);\n      if (!existingItem) {\n        const _items = addCartItem(item, items);\n        return dispatch(apiSetCart(userId, _items));\n      }\n      const _items = addCartItemCount(item, items);\n      return dispatch(apiSetCart(userId, _items));\n    },\n    [items, dispatch],\n  );\n\n  const removeOrDecreaseItem = useCallback(\n    (userId: string, item: Item) => {\n      const existingItem: Item = exists(item.id, items);\n      if (existingItem && existingItem.quantity === 1) {\n        const _items = removeCartItem(item, items);\n        return dispatch(apiSetCart(userId, _items));\n      }\n      const _items = removeCartItemCount(item, items);\n      return dispatch(apiSetCart(userId, _items));\n    },\n    [items, dispatch],\n  );\n\n  const removeItem = useCallback(\n    (userId: string, item: Item) => {\n      const _items = items.filter(({ id }) => id !== item.id);\n      return dispatch(apiSetCart(userId, _items));\n    },\n    [items, dispatch],\n  );\n\n  return {\n    addOrIncreaseItem,\n    removeOrDecreaseItem,\n    removeItem,\n  };\n};\n","import React, { useState } from 'react';\nimport { useCartItems, useCartItemsActions } from '../reducers/cart/hooks';\nimport { useMe } from '../reducers/me/hooks';\nimport {\n  Grid,\n  Drawer,\n  Button,\n  List,\n  ListItem,\n  ListItemText,\n  Avatar,\n  ListItemAvatar,\n  CircularProgress,\n} from '@material-ui/core';\nimport { Item } from '../reducers/cart/types';\nimport { useOrderActions, useOrders } from '../reducers/orders/hooks';\n\nconst Cart = () => {\n  const [openDrawer, setOpenDrawer] = useState(false);\n  const { me } = useMe();\n  const { items } = useCartItems((me && me.id) || '');\n  const { addOrIncreaseItem, removeOrDecreaseItem, removeItem } = useCartItemsActions();\n  const { loading } = useOrders();\n\n  const { createOrder } = useOrderActions();\n\n  const total = items.reduce((sum, { quantity }) => (sum += quantity), 0);\n\n  const handleOpenDrawer = () => total > 0 && setOpenDrawer(true);\n  const handleCloseDrawer = () => setOpenDrawer(false);\n  const handleAddItem = (item: Item) => () => me && me.id && addOrIncreaseItem(me.id, item);\n  const handleRemoveItem = (item: Item) => () => me && me.id && removeOrDecreaseItem(me.id, item);\n  const handleRemove = (item: Item) => () => me && me.id && removeItem(me.id, item);\n  const handleCreateOrderClick = () => {\n    if (me) {\n      setOpenDrawer(false);\n      return createOrder(me, items);\n    }\n  };\n\n  if (!me) {\n    return null;\n  }\n  return (\n    <Grid container justify=\"flex-end\">\n      {loading && <CircularProgress />}\n      <Button disabled={!!loading || items.length === 0} onClick={handleOpenDrawer}>{`Cart: ${total}`}</Button>\n      <Drawer anchor=\"right\" open={openDrawer} onClose={handleCloseDrawer}>\n        <Grid container>\n          <List>\n            {items.map(item => (\n              <ListItem key={`${item.id}`} divider>\n                <ListItemAvatar>\n                  <Avatar alt={item.title} src={item.book_cover} variant=\"square\" />\n                </ListItemAvatar>\n                <ListItemText primary={item.title} />\n                <div>\n                  <Button onClick={handleRemoveItem(item)}>{`<`}</Button>\n                  <span>{`Quantity: ${item.quantity}`}</span>\n                  <Button onClick={handleAddItem(item)}>{`>`}</Button>\n                </div>\n                <div>\n                  <Button onClick={handleRemove(item)}>Remove</Button>\n                </div>\n              </ListItem>\n            ))}\n          </List>\n        </Grid>\n\n        {items.length > 0 && (\n          <Grid container justify=\"center\">\n            <Button onClick={handleCreateOrderClick} variant=\"contained\" fullWidth={false}>\n              Create Order\n            </Button>\n          </Grid>\n        )}\n      </Drawer>\n    </Grid>\n  );\n};\n\nexport default Cart;\n","import React from \"react\";\nimport { useGetBooks } from \"../../reducers/books/hooks\";\nimport { CircularProgress, Grid } from \"@material-ui/core\";\nimport Book from \"./Book\";\nimport { useCartItemsActions } from \"../../reducers/cart/hooks\";\nimport Cart from \"../../components/Cart\";\nimport { useMe } from \"../../reducers/me/hooks\";\n\nconst BooksPage = () => {\n  const { books, loading } = useGetBooks();\n  const { addOrIncreaseItem } = useCartItemsActions();\n  const { me } = useMe()\n  const handleAdd = item => me && me.id && addOrIncreaseItem(me.id, item);\n  return (\n    <div>\n      {loading && <CircularProgress />}\n      {!loading && (\n        <Grid container spacing={1}>\n          <Cart />\n          {books.map(book => (\n            <Book key={book.id} book={book} handleClick={handleAdd} />\n          ))}\n        </Grid>\n      )}\n    </div>\n  );\n};\n\nexport default BooksPage;\n"],"sourceRoot":""}