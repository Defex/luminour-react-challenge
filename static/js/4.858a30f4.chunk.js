(this["webpackJsonpluminour-react-challenge"]=this["webpackJsonpluminour-react-challenge"]||[]).push([[4],{154:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext();t.a=r},155:function(e,t,a){"use strict";var n=a(10),r=a.n(n),c=a(16),o=a(36),i=a(13),u=a(30),s=function(){return JSON.parse(localStorage.getItem("carts")||"[]")},l=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.l)(100);case 2:return a=s().find((function(e){return e.userId===t}))||{items:[]},e.abrupt("return",a.items);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s(),c={userId:t,items:a},o=[],(u=n.find((function(e){return e.userId===t})))||(o=[].concat(Object(i.a)(n),[c])),u&&(o=n.map((function(e){return e.userId===t?c:e}))),r=o,localStorage.setItem("carts",JSON.stringify(r)),e.abrupt("return",c);case 8:case"end":return e.stop()}var r}),e)})));return function(t,a){return e.apply(this,arguments)}}();a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return v}));var p=function(e){return{type:o.a.setItems,payload:{items:e}}},f=function(){return{type:o.a.fetchStart}},b=function(e){return{type:o.a.fetchEnd,payload:{errorMessage:e}}},m=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(f()),t.prev=1,t.next=4,l(e);case 4:n=t.sent,a(p(n)),a(b()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),a(b());case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e,t){return function(){var a=Object(c.a)(r.a.mark((function a(n){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(f()),a.prev=1,a.next=4,d(e,t);case 4:n(p(t)),n(b()),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0),n(b(a.t0.message));case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}},157:function(e,t,a){"use strict";var n=a(45),r=a(6),c=a(26),o=a(56),i=a(10),u=a.n(i),s=a(16),l=a(18),d=a(30),p=Object(d.c)("orders"),f=p.getItems,b=p.createItems,m=p.updateItems,v=f,g=b,h=m,O=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return a=e.sent,e.abrupt("return",a.filter((function(e){return e.buyer.id===t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=a(155),j=function(e){return{type:l.a.setOrders,payload:{orders:e}}},x=function(e){return{type:l.a.updateOrders,payload:{orders:e}}},w=function(){return{type:l.a.fetchStart}},k=function(){return{type:l.a.fetchEnd}},E=function(e){return function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(w()),t.prev=1,t.next=4,O(e);case 4:n=t.sent,a(j(n)),a(k()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),a(k());case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(s.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(w()),t.prev=1,t.next=4,h(e);case 4:a(x(e)),a(k()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),a(k());case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},N=a(49),R=a(0);a.d(t,"d",(function(){return I})),a.d(t,"c",(function(){return z})),a.d(t,"a",(function(){return H})),a.d(t,"b",(function(){return S}));var I=function(){return Object(c.c)((function(e){return e.orders}))},z=function(){var e=Object(c.b)();return{createOrder:function(t,a){return e((n={id:Object(o.uuid)(),buyer:{id:t.id,name:t.name,surname:t.surname,username:t.username},status:l.b.new,items:a},function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w()),e.prev=1,e.next=4,g([n]);case 4:a=e.sent,t(j(a)),t(Object(y.b)(n.buyer.id,[])),t(k()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t(k());case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()));var n},confirmOrder:function(t){return e(C([Object(r.a)({},t,{status:l.b.paid})]))},cancelOrder:function(t){return e(C([Object(r.a)({},t,{status:l.b.canceled})]))},updateOrder:function(t){return e(C([t]))}}},H=function(){var e=Object(c.b)(),t=Object(N.b)(),a=Object(c.c)((function(e){return e.orders}));return Object(R.useEffect)((function(){!a.hasLoaded&&!a.loading&&t.me&&t.me.id&&e(E(t.me.id))})),Object(r.a)({},a,{loading:t.loading||a.loading})},S=function(e){var t=Object(R.useState)(!1),a=Object(n.a)(t,2),r=a[0],o=a[1],i=Object(c.b)(),u=Object(c.c)((function(e){return e.orders})),s=u.orders,l=u.loading,d=u.hasLoaded;return Object(R.useEffect)((function(){!e||r||l||(o(!0),i(E(e)))}),[e,l,i,r]),{orders:s,loading:l,hasLoaded:d}}},158:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext();t.a=r},160:function(e,t,a){"use strict";var n=a(2),r=a(1),c=a(0),o=a.n(c),i=(a(5),a(3)),u=a(4),s=a(158),l=o.a.forwardRef((function(e,t){var a=e.classes,c=e.className,u=e.component,l=void 0===u?"table":u,d=e.padding,p=void 0===d?"default":d,f=e.size,b=void 0===f?"medium":f,m=e.stickyHeader,v=void 0!==m&&m,g=Object(n.a)(e,["classes","className","component","padding","size","stickyHeader"]),h=o.a.useMemo((function(){return{padding:p,size:b,stickyHeader:v}}),[p,b,v]);return o.a.createElement(s.a.Provider,{value:h},o.a.createElement(l,Object(r.a)({ref:t,className:Object(i.a)(a.root,c,v&&a.stickyHeader)},g)))}));t.a=Object(u.a)((function(e){return{root:{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":Object(r.a)({},e.typography.body2,{padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},stickyHeader:{borderCollapse:"separate"}}}),{name:"MuiTable"})(l)},161:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),o=a.n(c),i=(a(5),a(3)),u=a(4),s=a(154),l={variant:"head"},d=o.a.forwardRef((function(e,t){var a=e.classes,c=e.className,u=e.component,d=void 0===u?"thead":u,p=Object(r.a)(e,["classes","className","component"]);return o.a.createElement(s.a.Provider,{value:l},o.a.createElement(d,Object(n.a)({className:Object(i.a)(a.root,c),ref:t},p)))}));t.a=Object(u.a)({root:{display:"table-header-group"}},{name:"MuiTableHead"})(d)},162:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),o=a.n(c),i=(a(5),a(3)),u=a(4),s=a(154),l=a(24),d=o.a.forwardRef((function(e,t){var a=e.classes,c=e.className,u=e.component,l=void 0===u?"tr":u,d=e.hover,p=void 0!==d&&d,f=e.selected,b=void 0!==f&&f,m=Object(r.a)(e,["classes","className","component","hover","selected"]),v=o.a.useContext(s.a);return o.a.createElement(l,Object(n.a)({ref:t,className:Object(i.a)(a.root,c,v&&{head:a.head,footer:a.footer}[v.variant],p&&a.hover,b&&a.selected)},m))}));t.a=Object(u.a)((function(e){return{root:{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,"&$hover:hover":{backgroundColor:e.palette.action.hover},"&$selected,&$selected:hover":{backgroundColor:Object(l.b)(e.palette.secondary.main,e.palette.action.selectedOpacity)}},selected:{},hover:{},head:{},footer:{}}}),{name:"MuiTableRow"})(d)},163:function(e,t,a){"use strict";var n=a(2),r=a(1),c=a(0),o=a.n(c),i=(a(5),a(3)),u=a(4),s=a(8),l=a(24),d=a(158),p=a(154),f=o.a.forwardRef((function(e,t){var a,c=e.align,u=void 0===c?"inherit":c,l=e.classes,f=e.className,b=e.component,m=e.padding,v=e.scope,g=e.size,h=e.sortDirection,O=e.variant,y=Object(n.a)(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),j=o.a.useContext(d.a),x=o.a.useContext(p.a);a=b||(x&&"head"===x.variant?"th":"td");var w=v;!w&&x&&"head"===x.variant&&(w="col");var k=m||(j&&j.padding?j.padding:"default"),E=g||(j&&j.size?j.size:"medium"),C=O||x&&x.variant,N=null;return h&&(N="asc"===h?"ascending":"descending"),o.a.createElement(a,Object(r.a)({ref:t,className:Object(i.a)(l.root,l[C],f,"inherit"!==u&&l["align".concat(Object(s.a)(u))],"default"!==k&&l["padding".concat(Object(s.a)(k))],"medium"!==E&&l["size".concat(Object(s.a)(E))],{head:j&&j.stickyHeader&&l.stickyHeader}[C]),"aria-sort":N,scope:w},y))}));t.a=Object(u.a)((function(e){return{root:Object(r.a)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?Object(l.d)(Object(l.b)(e.palette.divider,1),.88):Object(l.a)(Object(l.b)(e.palette.divider,1),.68)),textAlign:"left",padding:16}),head:{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0px 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"},stickyHeader:{position:"sticky",top:0,left:0,zIndex:2,backgroundColor:e.palette.background.default}}}),{name:"MuiTableCell"})(f)},164:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),o=a.n(c),i=(a(5),a(3)),u=a(4),s=a(154),l={variant:"body"},d=o.a.forwardRef((function(e,t){var a=e.classes,c=e.className,u=e.component,d=void 0===u?"tbody":u,p=Object(r.a)(e,["classes","className","component"]);return o.a.createElement(s.a.Provider,{value:l},o.a.createElement(d,Object(n.a)({className:Object(i.a)(a.root,c),ref:t},p)))}));t.a=Object(u.a)({root:{display:"table-row-group"}},{name:"MuiTableBody"})(d)},175:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(157),o=a(143),i=a(152),u=a(160),s=a(161),l=a(162),d=a(163),p=a(164),f=a(145),b=a(18),m=a(20),v=a(46);t.default=function(){var e=Object(c.a)(),t=e.orders,a=e.loading,n=e.hasLoaded,g=Object(c.c)(),h=g.confirmOrder,O=g.cancelOrder,y=Object(m.f)().push,j=function(e){return function(){return O(e)}},x=function(e){return function(){return y(v.a["/my-orders/:orderId"].href(e.id))}};return r.a.createElement("div",null,a&&!n&&r.a.createElement(o.a,null),a&&n&&r.a.createElement(i.a,{open:!!a},r.a.createElement(o.a,null)),!a&&r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement(l.a,null,r.a.createElement(d.a,null,"id"),r.a.createElement(d.a,null,"status"),r.a.createElement(d.a,null,"actions"))),r.a.createElement(p.a,null,t.map((function(e){return r.a.createElement(l.a,{key:e.id},r.a.createElement(d.a,null,e.id),r.a.createElement(d.a,null,e.status),r.a.createElement(d.a,null,e.status===b.b.new&&r.a.createElement(f.a,{onClick:(t=e,function(){return h(t)})},"Confirm"),e.status===b.b.new&&r.a.createElement(f.a,{onClick:j(e)},"Cancel"),e.status===b.b.new&&r.a.createElement(f.a,{onClick:x(e)},"Edit"),e.status!==b.b.new&&r.a.createElement(f.a,{onClick:x(e)},"View")));var t}))))))}}}]);
//# sourceMappingURL=4.858a30f4.chunk.js.map